// jquery.repeater version 1.2.2
// https://github.com/DubFriend/jquery.repeater
// (MIT) 19-02-2019
// Brian Detering <BDeterin@gmail.com> (http://www.briandetering.net/)

!function(a){"use strict";var b=function(b){return a.isArray(b)},c=function(a){return!b(a)&&a instanceof Object},d=function(a){return a instanceof Function},e=function(b,c){return a.inArray(c,b)},f=function(a,b){return-1!==e(a,b)},g=function(a,b){for(var c in a)a.hasOwnProperty(c)&&b(a[c],c,a)},h=function(a){return a[a.length-1]},i=function(a,b){var c=[];return g(a,function(a,d,e){c.push(b(a,d,e))}),c},j=function(a,b,c){var d={};return g(a,function(a,e,f){e=c?c(e,a):e,d[e]=b(a,e,f)}),d},k=function(a,c,d){return b(a)?i(a,c):j(a,c,d)},l=function(a,b,c){return k(a,function(a,d){return a[b].apply(a,c||[])})},m=function(){var a,b={};for(a=0;a<arguments.length;a+=1)g(arguments[a],function(a,c){b[c]=a});return b},n=(function(){var a=0}(),function(a){a=a||{};var b={};return a.publish=function(a,c){g(b[a],function(a){a(c)})},a.subscribe=function(a,c){b[a]=b[a]||[],b[a].push(c)},a.unsubscribe=function(a){g(b,function(b){var c=e(b,a);-1!==c&&b.splice(c,1)})},a}),o=(function(){var a={},b=function(a){var b,c,d,e="",f="",g=function(){var b=-1!==a.indexOf("#"),c=-1!==a.indexOf("?"),d="";return c&&(d=a.split("?")[1]||"",b&&(d=d.split("#")[0]||"")),e=c?a.split("?")[0]||"":b?a.split("#")[0]||"":a,b&&(f=a.split("#")[1]||""),d?d.split("&"):[]}(),h={};for(d=0;d<g.length;d+=1)b=g[d].split("=")[0],c=g[d].split("=")[1],h[b]=c;return{url:e||"",hash:f||"",parameters:h}},c=function(a){var b=[];return g(a.parameters,function(c,d){b.push(d+"="+a.parameters[d])}),a.url+(b.length>0?"?"+b.join("&"):"")+(a.hash?"#"+a.hash:"")};a.get=function(a){return b(a).parameters},a.set=function(a,d){var e=b(a);return e.parameters=m(e.parameters,d),c(e)}}(),function(b,c,d){return a(b+(d?"-"+d:"")+(c?"-"+c:""))}),p=(function(a){var b=Array.prototype.slice.call(arguments,1);if(d(a));}(o,".frm"),function(a,b){var c=n(),d=a.$;return c.getType=function(){throw'implement me (return type. "text", "radio", etc.)'},c.$=function(a){return a?d.find(a):d},c.disable=function(){c.$().prop("disabled",!0),c.publish("isEnabled",!1)},c.enable=function(){c.$().prop("disabled",!1),c.publish("isEnabled",!0)},b.equalTo=function(a,b){return a===b},b.publishChange=function(){var a;return function(d,e){var f=c.get();b.equalTo(f,a)||c.publish("change",{e:d,domElement:e}),a=f}}(),c}),q=function(a,b){var c=p(a,b);return c.get=function(){return c.$().val()},c.set=function(a){c.$().val(a)},c.clear=function(){c.set("")},b.buildSetter=function(a){return function(b){a.call(c,b)}},c},r=function(a,c){a=b(a)?a:[a],c=b(c)?c:[c];var d=!0;return a.length!==c.length?d=!1:g(a,function(a){f(c,a)||(d=!1)}),d},s=function(a){var b={},c=q(a,b);return c.getType=function(){return"button"},c.$().on("change",function(a){b.publishChange(a,this)}),c},t=function(c){var d={},e=q(c,d);return e.getType=function(){return"checkbox"},e.get=function(){var b=[];return e.$().filter(":checked").each(function(){b.push(a(this).val())}),b},e.set=function(c){c=b(c)?c:[c],e.$().each(function(){a(this).prop("checked",!1)}),g(c,function(a){e.$().filter('[value="'+a+'"]').prop("checked",!0)})},d.equalTo=r,e.$().change(function(a){d.publishChange(a,this)}),e},u=function(a){var b={},c=D(a,b);return c.getType=function(){return"email"},c},v=function(b){var c={},d=p(b,c);return d.getType=function(){return"file"},d.get=function(){return h(d.$().val().split("\\"))},d.clear=function(){this.$().each(function(){a(this).wrap("<form>").closest("form").get(0).reset(),a(this).unwrap()})},d.$().change(function(a){c.publishChange(a,this)}),d},w=function(a){var b={},c=q(a,b);return c.getType=function(){return"hidden"},c.$().change(function(a){b.publishChange(a,this)}),c},x=function(b){var c={},d=p(b,c);return d.getType=function(){return"file[multiple]"},d.get=function(){var a,b=d.$().get(0).files||[],c=[];for(a=0;a<(b.length||0);a+=1)c.push(b[a].name);return c},d.clear=function(){this.$().each(function(){a(this).wrap("<form>").closest("form").get(0).reset(),a(this).unwrap()})},d.$().change(function(a){c.publishChange(a,this)}),d},y=function(a){var c={},d=q(a,c);return d.getType=function(){return"select[multiple]"},d.get=function(){return d.$().val()||[]},d.set=function(a){d.$().val(""===a?[]:b(a)?a:[a])},c.equalTo=r,d.$().change(function(a){c.publishChange(a,this)}),d},z=function(a){var b={},c=D(a,b);return c.getType=function(){return"password"},c},A=function(b){var c={},d=q(b,c);return d.getType=function(){return"radio"},d.get=function(){return d.$().filter(":checked").val()||null},d.set=function(b){b?d.$().filter('[value="'+b+'"]').prop("checked",!0):d.$().each(function(){a(this).prop("checked",!1)})},d.$().change(function(a){c.publishChange(a,this)}),d},B=function(a){var b={},c=q(a,b);return c.getType=function(){return"range"},c.$().change(function(a){b.publishChange(a,this)}),c},C=function(a){var b={},c=q(a,b);return c.getType=function(){return"select"},c.$().change(function(a){b.publishChange(a,this)}),c},D=function(a){var b={},c=q(a,b);return c.getType=function(){return"text"},c.$().on("change keyup keydown",function(a){b.publishChange(a,this)}),c},E=function(a){var b={},c=q(a,b);return c.getType=function(){return"textarea"},c.$().on("change keyup keydown",function(a){b.publishChange(a,this)}),c},F=function(a){var b={},c=D(a,b);return c.getType=function(){return"url"},c},G=function(b){var d={},f=b.$,h=b.constructorOverride||{button:s,text:D,url:F,email:u,password:z,range:B,textarea:E,select:C,"select[multiple]":y,radio:A,checkbox:t,file:v,"file[multiple]":x,hidden:w},i=function(b,e){(c(e)?e:f.find(e)).each(function(){var c=a(this).attr("name");d[c]=h[b]({$:a(this)})})},j=function(b,i){var j=[],k=c(i)?i:f.find(i);c(i)?d[k.attr("name")]=h[b]({$:k}):(k.each(function(){a(this).attr("name");-1===e(j,a(this).attr("name"))&&j.push(a(this).attr("name"))}),g(j,function(a){d[a]=h[b]({$:f.find('input[name="'+a+'"]')})}))};return f.is("input, select, textarea")?f.is('input[type="button"], button, input[type="submit"]')?i("button",f):f.is("textarea")?i("textarea",f):f.is('input[type="text"]')||f.is("input")&&!f.attr("type")?i("text",f):f.is('input[type="password"]')?i("password",f):f.is('input[type="email"]')?i("email",f):f.is('input[type="url"]')?i("url",f):f.is('input[type="range"]')?i("range",f):f.is("select")?f.is("[multiple]")?i("select[multiple]",f):i("select",f):f.is('input[type="file"]')?f.is("[multiple]")?i("file[multiple]",f):i("file",f):f.is('input[type="hidden"]')?i("hidden",f):f.is('input[type="radio"]')?j("radio",f):f.is('input[type="checkbox"]')?j("checkbox",f):i("text",f):(i("button",'input[type="button"], button, input[type="submit"]'),i("text",'input[type="text"]'),i("password",'input[type="password"]'),i("email",'input[type="email"]'),i("url",'input[type="url"]'),i("range",'input[type="range"]'),i("textarea","textarea"),i("select","select:not([multiple])"),i("select[multiple]","select[multiple]"),i("file",'input[type="file"]:not([multiple])'),i("file[multiple]",'input[type="file"][multiple]'),i("hidden",'input[type="hidden"]'),j("radio",'input[type="radio"]'),j("checkbox",'input[type="checkbox"]')),d};a.fn.inputVal=function(b){var c=a(this),d=G({$:c});return c.is("input, textarea, select")?void 0===b?d[c.attr("name")].get():(d[c.attr("name")].set(b),c):void 0===b?l(d,"get"):(g(b,function(a,b){d[b]&&d[b].set(a)}),c)},a.fn.inputOnChange=function(b){var c=a(this),d=G({$:c});return g(d,function(a){a.subscribe("change",function(a){b.call(a.domElement,a.e)})}),c},a.fn.inputDisable=function(){var b=a(this);return l(G({$:b}),"disable"),b},a.fn.inputEnable=function(){var b=a(this);return l(G({$:b}),"enable"),b},a.fn.inputClear=function(){var b=a(this);return l(G({$:b}),"clear"),b}}(jQuery),function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],b):b(a.jQuery)}(this,function(a){"use strict";function b(a){return a}function c(b){return a.isArray(b)}function d(a,b){a&&Object.keys(a).forEach(function(c){return b(a[c],c,a)})}function e(a){return a[a.length-1]}function f(){for(var a={},b=arguments.length,c=new Array(b),e=0;e<b;e++)c[e]=arguments[e];return d(c,function(b){d(b,function(b,c){a[c]=b})}),a}function g(a,b){var c=[];return d(a,function(a,d,e){c.push(b(a,d,e))}),c}function h(a,b,c){var e={};return d(a,function(a,d,f){d=c?c(d,a):d,e[d]=b(a,d,f)}),e}function i(a,b,d){return c(a)?g(a,b):h(a,b,d)}function j(a,b){return i(a,function(a){return a[b]})}function k(a,b){var e;return c(a)?(e=[],d(a,function(a,c,d){b(a,c,d)&&e.push(a)})):(e={},d(a,function(a,c,d){b(a,c,d)&&(e[c]=a)})),e}a=a&&a.hasOwnProperty("default")?a.default:a,a.fn.repeaterVal=function(){function b(a){if(1===a.length&&(0===a[0].key.length||1===a[0].key.length)&&!a[0].key[0])return a[0].val;d(a,function(a){a.head=a.key.shift()});var c,e=function(){var b={};return d(a,function(a){b[a.head]||(b[a.head]=[]),b[a.head].push(a)}),b}();return/^[0-9]+$/.test(a[0].head)?(c=[],d(e,function(a){c.push(b(a))})):(c={},d(e,function(a,d){c[d]=b(a)})),c}return b(function(a){var b=[];return d(a,function(a,c){var d=[];"undefined"!==c&&(d.push(c.match(/^[^[]*/)[0]),d=d.concat(i(c.match(/\[[^\]]*\]/g),function(a){return a.replace(/[[\]]/g,"")})),b.push({val:a,key:d}))}),b}(a(this).inputVal()))},a.fn.repeater=function(c){c=c||{};var g;return a(this).each(function(){function h(b,c,d){b.each(function(b){var f=a(this);f.data("item-name","".concat(c,"[").concat(b,"]")),p(f.find("[name]"),d).each(function(){var g=a(this),i=g.attr("name").match(/\[[^\]]+\]/g),j=i?e(i).replace(/\[|\]/g,""):g.attr("name"),k="".concat(c,"[").concat(b,"][").concat(j,"]").concat(g.is(":checkbox")||g.attr("multiple")?"[]":"");g.attr("name",k),v(d,f,function(d){var e=a(this);h(p(e.find("[data-repeater-item]"),d.repeaters||[]),"".concat(c,"[").concat(b,"]")+"[".concat(e.find("[data-repeater-list]").first().data("repeater-list"),"]"),d.repeaters)})})}),o.find("input[name][checked]").removeAttr("checked").prop("checked",!0)}var l=a(this),m=c.show||function(){a(this).show()},n=c.hide||function(a){a()},o=l.find("[data-repeater-list]").first(),p=function(b,c){return b.filter(function(){return!c||0===a(this).closest(j(c,"selector").join(",")).length})},q=function(){return p(o.find("[data-repeater-item]"),c.repeaters)},r=o.find("[data-repeater-item]").first().clone().hide(),s=p(p(a(this).find("[data-repeater-item]"),c.repeaters).first().find("[data-repeater-delete]"),c.repeaters);c.isFirstItemUndeletable&&s&&s.remove();var t=function(){var a=o.data("repeater-list");return c.$parent?"".concat(c.$parent.data("item-name"),"[").concat(a,"]"):a},u=function(b){c.repeaters&&b.each(function(){var b=a(this);d(c.repeaters,function(a){b.find(a.selector).repeater(f(a,{$parent:b}))})})},v=function(a,b,c){a&&d(a,function(a){c.call(b.find(a.selector)[0],a)})};h(q(),t(),c.repeaters),u(q()),c.initEmpty&&q().remove(),c.ready&&c.ready(function(){h(q(),t(),c.repeaters)});var w=function(){function e(f,g,h){if(g||c.defaultValues){var j={};p(f.find("[name]"),h).each(function(){var b=a(this).attr("name").match(/\[([^\]]*)(\]|\]\[\])$/)[1];j[b]=a(this).attr("name")}),f.inputVal(i(k(g||c.defaultValues,function(a,b){return j[b]}),b,function(a){return j[a]}))}v(h,f,function(b){var c=a(this);p(c.find("[data-repeater-item]"),b.repeaters).each(function(){var f=c.find("[data-repeater-list]").data("repeater-list");if(g&&g[f]){var h=a(this).clone();c.find("[data-repeater-item]").remove(),d(g[f],function(a){var d=h.clone();e(d,a,b.repeaters||[]),c.find("[data-repeater-list]").append(d)})}else e(a(this),b.defaultValues,b.repeaters||[])})})}return function(b,d){o.append(b),h(q(),t(),c.repeaters),b.find("[name]").each(function(){a(this).inputClear()}),e(b,d||c.defaultValues,c.repeaters)}}(),x=function(a){var b=r.clone();w(b,a),c.repeaters&&u(b),m.call(b.get(0))};g=function(a){q().remove(),d(a,x)},p(l.find("[data-repeater-create]"),c.repeaters).click(function(){x()}),o.on("click","[data-repeater-delete]",function(){var b=a(this).closest("[data-repeater-item]").get(0);n.call(b,function(){a(b).remove(),h(q(),t(),c.repeaters)})})}),this.setList=g,this}});